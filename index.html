<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>GalaBau KI-Meisterassistent</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: system-ui, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
    h1 { font-size: 1.6rem; margin-bottom: 0.3rem; }
    .sub { color: #555; margin-bottom: 1rem; }
    textarea { width: 100%; min-height: 160px; padding: 10px; box-sizing: border-box; resize: vertical; font-family: inherit; }
    button { margin-top: 10px; padding: 10px 18px; border: none; cursor: pointer; border-radius: 4px; font-size: 0.95rem; }
    #sendBtn { background: #007bff; color: white; }
    #sendBtn:disabled { opacity: 0.6; cursor: wait; }
    .response-box { margin-top: 20px; padding: 15px; background: #ffffff; border-radius: 6px; white-space: pre-wrap; border: 1px solid #ddd; }
    .label { font-weight: 600; margin-top: 15px; margin-bottom: 4px; }
  </style>
</head>
<body>
  <h1>GalaBau KI-Meisterassistent</h1>
  <div class="sub">
    Gib deinen Auftrag bitte so ein:<br>
    <code>AUFTRAG: ...<br>DATEN: ...<br>AUSGABE ERWÜNSCHT: ...</code>
  </div>

  <div class="label">Eingabe</div>
  <textarea id="input" placeholder="Beispiel:
AUFTRAG: Angebot Rollrasen erstellen
DATEN: 85 m², leichte Hanglage, alte Grasnarbe entfernen, Region Kassel
AUSGABE ERWÜNSCHT: Detailliertes Angebot mit Kurzfassung, Materialliste und Arbeitszeit"></textarea>

  <button id="sendBtn">An Agent senden</button>

  <div class="label">Antwort</div>
  <div id="output" class="response-box">Hier erscheint die Antwort des KI-Meisterassistenten.</div>

  <script>
    const API_URL = "https://galabau-agent.onrender.com";

    const inputEl = document.getElementById("input");
    const outputEl = document.getElementById("output");
    const sendBtn = document.getElementById("sendBtn");

    async function sendToAgent() {
      const text = inputEl.value.trim();
      if (!text) {
        alert("Bitte einen Auftrag eingeben.");
        return;
      }

      sendBtn.disabled = true;
      sendBtn.textContent = "Wird verarbeitet...";
      outputEl.textContent = "Der Agent arbeitet ...";

      try {
        const res = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ userInput: text })
        });

        if (!res.ok) throw new Error("Fehler vom Server: " + res.status);

        const data = await res.json();
        outputEl.textContent = data.reply || "Keine Antwort erhalten.";
      } catch (err) {
        console.error(err);
        outputEl.textContent = "Fehler bei der Anfrage. Bitte später erneut versuchen.";
      } finally {
        sendBtn.disabled = false;
        sendBtn.textContent = "An Agent senden";
      }
    }

    sendBtn.addEventListener("click", sendToAgent);
  </script>
</body>
</html>

